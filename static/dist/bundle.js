const Addons=(_=>{let downloadPdf=_=>{let endpoint=window.location.href.split('#')[0].replace('/blog','/api/export/blog');fetch(endpoint).then(response=>{if(!response.ok){throw new Error('Network response was not ok')}return response.url}).then(url=>{const a=document.createElement('a');a.href=url;a.download=Utils.getSlug()+'.pdf';document.body.appendChild(a);a.click();document.body.removeChild(a);}).catch(error=>{console.error('There was an error with the fetch operation:',error);});};return{downloadPdf:_=>{return downloadPdf()},};})();let $=jQuery;const Apis=(_=>{let apiUri='https://api.kremilly.com';let projects=_=>{fetch(apiUri).then(json=>json.json()).then(response=>{$('#apisProjectsListBtn').addClass('actived');$('#pinnedProjectsListBtn').removeClass('actived');$('#cratesProjectsListBtn').removeClass('actived');$('#featuredProjectsListBtn').removeClass('actived');$('#projectsList').empty();response.list.forEach(item=>{$('#projectsList').append(`<a href='${item.wiki}' target='_blank' class='item project-item'>${Utils.capitalize(item.name)}</a>`);});});};let checkApi=_=>{if(window.location.pathname=='/'){if(window.location.hash){$('#featured').addClass('featured-caller');}else{$('#featured').removeClass('featured-caller');}switch(window.location.hash){case '#apis':featured();break;case '#pins':GitHub.featured();break;case '#crates':Crates.featured();break;case '#projects':Projects.featured();break;default:GitHub.featured(true);break;}}};return{apiUri:apiUri,featured:()=>{return featured()},projects:()=>{return projects()},checkApi:()=>{return checkApi()},};})();const Cookies=(_=>{let set=(name,value,days)=>{const date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));const expires="expires="+date.toUTCString();document.cookie=name+"="+value+";"+expires+";path=/";};let get=name=>{const cookie=document.cookie.match('(^|;)?'+name+'=([^;]*)(;|$)');return cookie?cookie[2]:null;};return{get:(name)=>{return get(name)},set:(name,value,days)=>{return set(name,value,days)},};})();const Crates=(_=>{let cratesPage='https://crates.io/crates/';let cratesURI='https://crates.io/api/v1/crates?user_id=232087';let crateURI='https://crates.io/api/v1/crates/';let featured=_=>{if(window.location.pathname=='/'){fetch(cratesURI).then(json=>json.json()).then(response=>{window.location.hash='crates';$('.featured-tabs').removeClass('actived');$('#tabCrates').toggleClass('actived');$('#featuredList').empty();response.crates.forEach(item=>{$('#featuredList').append(`<a href='${cratesPage}${item.name}' target='_blank' class='item featured-item'><div class='name'>${Utils.capitalize(item.name)}</div><div class='info'>${item.description}</div><div class='footer'><div class='lang'>${'v.'+item.newest_version}</div><div class='stats'>${Utils.format(item.downloads)+' downloads'}</div></div></a>`);});$('#featured').show();});}};let projects=_=>{fetch(cratesURI).then(json=>json.json()).then(response=>{$('#cratesProjectsListBtn').addClass('actived');$('#apisProjectsListBtn').removeClass('actived');$('#pinnedProjectsListBtn').removeClass('actived');$('#featuredProjectsListBtn').removeClass('actived');$('#projectsList').empty();response.crates.forEach(item=>{$('#projectsList').append(`<a href='https://crates.io/crates/${item.name}' target='_blank' class='item project-item'>${Utils.capitalize(item.name)}<div class='description'>${item.description}</div></a>`);});});};let projects_page=_=>{fetch(cratesURI).then(json=>json.json()).then(response=>{$('#cratesListPage').empty();response.crates.forEach(item=>{$('#cratesListPage').append(`<a href='https://crates.io/crates/${item.name}' target='_blank' class='project'><h2>${Utils.capitalize(item.name)}</h2><p>${item.description}</p></a>`);});});};let countDownloads=_=>{if($('.install').length){$('.alert-install-count').each(function(){let $this=$(this);let pkgName=$this.data('pkg');let pkgType=$this.data('pkg-type');if(pkgType=='cargo'){fetch(crateURI+pkgName).then(json=>json.json()).then(response=>{let totalDownloads=Utils.format(response.crate.downloads);$(this).html(`<div class='fas fa-download icon'></div>${totalDownloads}`);});}});}};return{cratesURI:cratesURI,cratesPage:cratesPage,featured:()=>{return featured()},projects:()=>{return projects()},projects_page:()=>{return projects_page()},countDownloads:()=>{return countDownloads()},};})();const Error404=(_=>{let docsUri=window.location.href.replace(window.location.href,'')+'/api/docs';let postsUri=window.location.href.replace(window.location.href,'')+'/api/posts';let posts=_=>{if($('#blogTabError404').is(':visible')){fetch(postsUri).then(json=>json.json()).then(response=>{$('#blogTabError404').addClass('actived');$('#docsTabError404').removeClass('actived');$('#linksTabError404').removeClass('actived');$('#itemsContentError').empty();response.forEach(item=>{$('#itemsContentError').append(`<li><a href='${item.url}'>${item.title}</a></li>`);});});}};let docs=_=>{if($('#docsTabError404').is(':visible')){fetch(docsUri).then(json=>json.json()).then(response=>{$('#docsTabError404').addClass('actived');$('#blogTabError404').removeClass('actived');$('#linksTabError404').removeClass('actived');$('#itemsContentError').empty();response.forEach(item=>{$('#itemsContentError').append(`<li><a href='${item.url}'>${item.title}</a></li>`);});});}};return{docs:()=>{return docs()},posts:()=>{return posts()},};})();const GitHub=(_=>{let username='kremilly';let apiUri='https://api.kremilly.com';let projects=_=>{fetch(`${Apis.apiUri}/github?user=${username}`).then(json=>json.json()).then(response=>{$('#pinnedProjectsListBtn').addClass('actived');$('#apisProjectsListBtn').removeClass('actived');$('#cratesProjectsListBtn').removeClass('actived');$('#featuredProjectsListBtn').removeClass('actived');$('#projectsList').empty();response.forEach(item=>{let tags='';for(const tag of item.tags){tags+=`<div class="tag ${tag.toLowerCase()}">${tag}</div>`;}$('#projectsList').append(`<a href='${item.url}' target='_blank' class='item project-item'>${item.name}<div class='description'>${item.description}</div>${tags}</a>`);});});};let featured=(no_anchor=false)=>{if(window.location.pathname=='/'){fetch(`${apiUri}/github?user=${username}`,{method:'GET',cache:'default',}).then(json=>json.json()).then(response=>{if(!no_anchor)window.location.hash='pins';$('.featured-tabs').removeClass('actived');$('#tabPins').toggleClass('actived');$('#featuredList').empty();response.forEach(item=>{$('#featuredList').append(`<a href='${item.url}' target='_blank' class='item featured-item'><div class='name'>${item.name}</div><div class='info'>${item.description}</div><div class='footer'><div class='lang ${item.languages[0].toLowerCase()}' data-lang='${item.languages[0]}'>${item.languages[0]}</div><div class='stats'><div class='fas fa-star'></div>${Utils.format(item.stars)+' stars'}<div class='fas fa-code-fork'></div>${Utils.format(item.forks)+' forks'}</div></div></a>`);});$('#featured').show();});}};let projects_page=_=>{fetch(`${apiUri}/github?user=${username}`,{method:'GET',cache:'default',}).then(json=>json.json()).then(response=>{$('#reposListPage').empty();response.forEach(item=>{let tags='';let langs='';let home='';for(const tag of item.tags){tags+=`<div class="tag">${tag}</div>`;}for(const lang of item.languages){langs+=`<div class="lang ${lang.toLowerCase()}">${lang}</div>`;}if(item.home){home=`<a href='${item.home}' class='button'>Home</a>`;}$('#reposListPage').append(`<div class="project"><h2>${item.name}</h2><div class='stats'><div class='item'><div class='fas fa-star icon gold'></div>${Utils.format(item.stars)+' stars'}</div><div class='item'><div class='fas fa-code-fork icon silver'></div>${Utils.format(item.forks)+' forks'}</div></div><div class='langs'>${langs}</div><p>${item.description}</p><div class='tags'>${tags}</div><div class='buttons'><a href='${item.url}' class='button'>Repository</a>${home}</div></div>`);});});};return{username:username,projects:()=>{return projects()},featured:()=>{return featured()},projects_page:()=>{return projects_page()}};})();$(_=>{Wikipedia.get();ScrollTo.checkScroll();Crates.countDownloads();YTC.init();Error404.posts();$('#postReadAlsoBox').show();if(window.scrollY>10){$('header').addClass('glass-effect');$('#tocBox').addClass('glass-effect');$('#toolsBox').addClass('glass-effect');}else{$('header').removeClass('glass-effect');$('#tocBox').removeClass('glass-effect');$('#toolsBox').removeClass('glass-effect');}window.addEventListener('scroll',()=>{if(window.scrollY>10){$('header').addClass('glass-effect');$('#tocBox').addClass('glass-effect');$('#toolsBox').addClass('glass-effect');}else{$('header').removeClass('glass-effect');$('#tocBox').removeClass('glass-effect');$('#toolsBox').removeClass('glass-effect');}});if($('.container-projects').length>0){Crates.projects_page();GitHub.projects_page();Projects.projects_page();$('#reposListPage').slideToggle(250);$('#cratesListPage').slideToggle(250);$('#toggleReposListPage').on('click',function(){$('#reposListPage').slideToggle(250);});$('#toggleCratesListPage').on('click',function(){$('#cratesListPage').slideToggle(250);});}let hideMenuTimeout;let pathParts=window.location.pathname.split('/');setTimeout(function(){let searchParam=new URL(window.location).searchParams.get('q');if(searchParam){let inputElement=$('#postsSearch');inputElement.val(searchParam);inputElement.each(function(){let event=new Event('input',{bubbles:true});this.dispatchEvent(event);});}},10);if(window.location.pathname.split('/').filter(Boolean).pop()==='blog'){$('#tocBoxBtn').hide();}$(window).on('scroll',ScrollTo.checkScroll);$('#scrollToTopBtn').on('click',ScrollTo.top);$('#menuBoxTogglePagesBtn').on('click',function(){$(this).addClass('actived');$('#menuBoxToggleDocsBtn').removeClass('actived');$('#menuBoxToggleDocs').slideUp(250);$('#menuBoxTogglePages').slideDown(250);});$('#postsSearch').on('input',function(){let searchText=$(this).val().toLowerCase();let encodedSearchText=encodeURIComponent(searchText).replace(/%20/g,"+");history.replaceState(null,'',`?q=${encodedSearchText}`);if(!searchText){let url=new URL(window.location);url.searchParams.delete('q');history.replaceState(null,'',url.pathname+url.search);}$('.posts>.article').each(function(){$('.posts>.no-results').remove();let listItemText=$(this).text().toLowerCase();if(listItemText.includes(searchText)){$(this).show();}else{$(this).hide();if($('.posts>.article:visible').length==0){$('.posts>.no-results').remove();$('.posts').append(`<div class='no-results'>Nenhuma postagem foi encontrada...</div>`);}}});});$('#searchItemError404').on('input',function(){let searchText=$(this).val().toLowerCase();$('#itemsContentError>li>a').each(function(){let listItemText=$(this).text().toLowerCase();if(listItemText.includes(searchText)){$(this).show();}else{$(this).hide();}});});$('#blogTabError404').on('click',Error404.posts);});const Mermaid=(_=>{mermaid.initialize({theme:'dark',securityLevel:'loose',});let mermaidCodeBlocks=document.querySelectorAll('.language-mermaid');mermaidCodeBlocks.forEach(block=>{block.classList.remove('language-mermaid');block.classList.add('diagram-mermaid');});mermaidCodeBlocks.forEach(block=>{let diagramDiv=document.createElement('div');diagramDiv.classList.add('mermaid');diagramDiv.textContent=block.textContent;block.textContent='';block.appendChild(diagramDiv);mermaid.init(undefined,diagramDiv);});})();$(_=>{lazyload();$('#postDownloadPdfBtn,#postDownloadPdfBtn2').on('click',Addons.downloadPdf);$('#postShareBtn').on('click',function(){$(this).toggleClass('actived');$('#postShareBox').slideToggle(250);});$('#postFilesBtn').on('click',function(){$(this).toggleClass('actived');$('#postLinksBtn').removeClass('actived');$('#postReadAlsoBtn').removeClass('actived');$('#postLinksBox').hide();$('#postReadAlsoBox').hide();$('#postFilesBox').slideToggle(250);});$('#postReadAlsoBtn').on('click',function(){$(this).toggleClass('actived');$('#postLinksBtn').removeClass('actived');$('#postFilesBtn').removeClass('actived');$('#postLinksBox').hide();$('#postFilesBox').hide();$('#postReadAlsoBox').slideToggle(250);});$('#postLinksBtn').on('click',function(){$(this).toggleClass('actived');$('#postFilesBtn').removeClass('actived');$('#postReadAlsoBtn').removeClass('actived');$('#postFilesBox').hide();$('#postReadAlsoBox').hide();$('#postLinksBox').slideToggle(250);});$('#postShareBoxInput').on('click',function(){$(this).focus();$(this).select();let inputVal=$(this).val();navigator.clipboard.writeText(inputVal);});});const Projects=(_=>{let projectsUri=window.location.href.replace(window.location.href,'')+'/api/projects';let projects=_=>{fetch(projectsUri).then(json=>json.json()).then(response=>{$('#featuredProjectsListBtn').addClass('actived');$('#apisProjectsListBtn').removeClass('actived');$('#pinnedProjectsListBtn').removeClass('actived');$('#cratesProjectsListBtn').removeClass('actived');$('#projectsList').empty();response.forEach(item=>{$('#projectsList').append(`<a href='${item.url}' target='_blank' class='item project-item'>${item.name}<div class='description'>${item.description}</div></a>`);});});};let projects_page=_=>{fetch(projectsUri).then(json=>json.json()).then(response=>{$('#projectsListPage').empty();response.forEach(item=>{$('#projectsListPage').append(`<a href="${item.url}" target='_blank' class="project"><h2>${item.name}</h2><p>${item.description}</p></a>`);});});};return{projects:()=>{return projects()},projects_page:()=>{return projects_page()}};})();const ScrollTo=(_=>{let top=_=>{history.pushState(null,null,window.location.href.split('#')[0]);window.scroll({top:0,left:0,behavior:'smooth'});};let checkScroll=_=>{let scrollToTopBtn=document.getElementById('scrollToTopBtn');if(window.scrollY>0){scrollToTopBtn.style.display='block';}else{scrollToTopBtn.style.display='none';}};return{top:top,checkScroll:checkScroll};})();$(_=>{let paddingTop=60;let timerAnimate=800;let tocList=$('#tocList');let headers=$('h1,h2,h3');let currentHash=window.location.hash;$('#tocBoxBtn').click(function(){$('#pkgBoxBtn').removeClass('actived');$(this).toggleClass('actived');$('#pkgBox').slideUp();$('#tocBox').slideToggle(250);});$('#searchToc').on('input',function(){let searchText=$(this).val().toLowerCase();$('#tocList>a').each(function(){let listItemText=$(this).text().toLowerCase();if(listItemText.includes(searchText)){$(this).show();}else{$(this).hide();}});});headers.each(function(){let header=$(this);if(!header.attr('id')){let sanitizedId=Utils.removeAccents(header.text());header.attr('id',sanitizedId);}let link=$('<a/>').text(header.text()).attr('href','#'+header.attr('id'));tocList.append(link);});if(window.location.pathname!=='/'){tocList.on('click','a',function(){let targetOffset=$($(this).attr('href')).offset().top;$('html,body').animate({scrollTop:targetOffset-paddingTop},timerAnimate);});}if(currentHash&&window.location.pathname!=='/'){$('html,body').animate({scrollTop:$(currentHash).offset().top-paddingTop},timerAnimate);}});const Utils=(_=>{let format=number=>{switch(true){case number>=1e9:return Math.floor(number/1e9)+'B';case number>=1e6:return Math.floor(number/1e6)+'M';case number>=1000:return Math.floor(number/1000)+'k';default:return number.toString();}};let langColor=language=>{fetch(`https://gist.githubusercontent.com/Kremilly/0e2b5ac9779857efcf0e3fd6f62cd093/raw/112c3af99ed5db18776192609215353a18c28e9d/languages-hex-colors.json`,{method:'GET',cache:'default',}).then(response=>response.json()).then(colors=>{document.querySelectorAll(language).forEach(element=>{const lang=element.getAttribute('data-lang').toLowerCase();if(colors.hasOwnProperty(lang)){element.style.color=colors[lang];}});})};let removeAccents=text=>{return text.replace(/\s+/g,'_').replace(/[áàãâä]/gi,'a').replace(/[éèêë]/gi,'e').replace(/[íìîï]/gi,'i').replace(/[óòõôö]/gi,'o').replace(/[úùûü]/gi,'u').replace(/[ç]/gi,'c').replace(/[?!.,;:']/g,'');};let capitalize=text=>{return text.charAt(0).toUpperCase()+text.slice(1).toLowerCase();};let getSlug=_=>{var pathname=window.location.pathname;return slug=pathname.split('/').pop();};let copy=element=>{const range=document.createRange();range.selectNodeContents(element);const selection=window.getSelection();selection.removeAllRanges();selection.addRange(range);navigator.clipboard.writeText(selection.toString());};return{getSlug:_=>{return getSlug()},copy:(element)=>{return copy(element)},format:(number)=>{return format(number)},capitalize:(text)=>{return capitalize(text)},langColor:(language)=>{return langColor(language)},removeAccents:(text)=>{return removeAccents(text)},};})();const Wikipedia=(_=>{let endpoint='https://api.kremilly.com/wikipedia';let get=_=>{if($('.wikipedia').length){$('.wikipedia-page-content').each(function(){let text=$(this).text().replace("\n",'').split('/');fetch(`${endpoint}?location=${text[0]}&term=${text[1]}&short_summary=true`).then(json=>json.json()).then(response=>{$(this).html(response.summary);$(this).attr('href',response.page_url);});});}};return{get:()=>{return get()},};})();const YTC=(_=>{let players={},chapterTimestamps={},currentChapterIndex={};let init=_=>{if($('.youtube').length>0){let tag=document.createElement('script');tag.src='https://www.youtube.com/iframe_api';let firstScriptTag=document.getElementsByTagName('script')[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);window.onYouTubeIframeAPIReady=onYouTubeIframeAPIReady;onYouTubeChaptersAPIReady();}};let onYouTubeIframeAPIReady=_=>{var elements=document.querySelectorAll("[id^='player-']");elements.forEach(function(element){let videoId=element.getAttribute('data-video');let playerId=element.id;players[playerId]=new YT.Player(playerId,{width:'808',height:'404',videoId:videoId,events:{'onReady':onPlayerReady,'onStateChange':onPlayerStateChange}});});};let titleChaptersToggle=el=>{$($(el).attr('data-summary-id')+'>.title').toggleClass('title-active');$($(el).attr('data-summary-id')+'>.body').slideToggle(250);$($(el).attr('data-summary-id')+'>.controls>input').fadeToggle(250);};let searchChapters=el=>{let searchText=$(el).val().toLowerCase();let summaryId=$(el).closest('[id^="summary-"]').attr('id').replace('-search','');$(`#${summaryId}>.body>.chapter`).each(function(){let chapterText=$(this).find('.left').text().toLowerCase();if(chapterText.includes(searchText)){$(this).show();}else{$(this).hide();}});};let onYouTubeChaptersAPIReady=async _=>{let elements=document.querySelectorAll("[id^='summary-']");for(let element of elements){let summaryId=`#${element.id}`;let inputId=`${element.id}-search`;let videoId=element.getAttribute('data-video');let playerId=element.id.replace('summary','player');try{let response=await fetch(`https://kremilly.com/api/plugins/ytc?v=${videoId}`);let callback=await response.json();currentChapterIndex[playerId]=0;$(summaryId).empty();if(callback.summary&&callback.summary.length>0){$(summaryId).append(`<div class='title' data-summary-id='${summaryId}' onclick='YTC.titleChaptersToggle(this);'>Capítulos</div><div class='controls'><input type='search' id="${inputId}" placeholder='Buscar capítulos' oninput='YTC.searchChapters(this);'><div class='chapter-label'></div></div><div class='body'></div>`);let input=document.getElementById(inputId);if(!chapterTimestamps[playerId]){chapterTimestamps[playerId]=[];}callback.summary.forEach((chapter,index)=>{let timestamp=chapter.start_time_seconds.replace('s','');$(summaryId+'>.body').append(`<div class="chapter" data-time="${timestamp}" data-player="${playerId}" data-index="${index}"><div class="left">${limitTextSize(chapter.title,92)}</div><div class="right">${chapter.start_time}</div></div>`);chapterTimestamps[playerId].push(parseInt(chapter.start_time_seconds.replace('s','')));});chapterTitle(playerId,true);$(summaryId).show();}else{$(summaryId).hide();}}catch(error){console.error('Error fetching chapter data:',error);}}};let onPlayerReady=event=>{let player=event.target;let playerId=player.getIframe().id;document.querySelectorAll(`.chapter[data-player="${playerId}"]`).forEach(function(chapter){chapter.addEventListener('click',function(){currentChapterIndex[playerId]=parseInt(this.getAttribute('data-index'));goToTimestamp(playerId,player);});});};let limitTextSize=(text,maxLength)=>{if(text.length>maxLength){return text.substring(0,maxLength)+'...';}else{return text;}};let chapterTitle=(playerId,indexZero=false)=>{let chapterElement;if(indexZero!=true){chapterElement=document.querySelector(` .chapter[data-player="${playerId}"][data-index="${currentChapterIndex[playerId]}"]`);}else{chapterElement=document.querySelector(` .chapter[data-player="${playerId}"][data-index="0"]`);}if(chapterElement){$('#'+playerId.replace('player','summary')+'>.controls>.chapter-label').text(limitTextSize(chapterElement.querySelector('.left').textContent,48));}};let goToTimestamp=(playerId,player)=>{let timestamp=chapterTimestamps[playerId][currentChapterIndex[playerId]];chapterTitle(playerId);if(timestamp!==undefined){player.seekTo(timestamp);player.playVideo();}};let onPlayerStateChange=event=>{let player=event.target;let playerId=player.getIframe().id;if(event.data===YT.PlayerState.ENDED){if(currentChapterIndex[playerId]<chapterTimestamps[playerId].length-1){currentChapterIndex[playerId]++;goToTimestamp(playerId,player);}}};return{init:_=>{return init();},searchChapters:el=>{return searchChapters(el)},titleChaptersToggle:el=>{return titleChaptersToggle(el)},};})();