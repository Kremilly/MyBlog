let $=jQuery;const Apis=(e=>{let username='kremilly';let apiUri='https://api.kremilly.com';let projectsUri=window.location.href.replace(window.location.href,'')+'/api/projects';let cratesPage='https://crates.io/crates/';let cratesURI='https://crates.io/api/v1/crates?user_id=232087';let format=(number)=>{if(number>=1000){return(number/1000).toFixed(2)+'k';}else{return number.toString();}};let colors=(element)=>{fetch(`https://gist.githubusercontent.com/kremilly/0e2b5ac9779857efcf0e3fd6f62cd093/raw/112c3af99ed5db18776192609215353a18c28e9d/languages-hex-colors.json`,{method:'GET',cache:'default',}).then(json=>json.json()).then(response=>{_.forEach(response,(value,key)=>{if($(element).attr('data-lang').toLowerCase()==key){$(element).css('color',value);}});});};let pinned=(no_anchor=false)=>{if(window.location.pathname=='/'){fetch(`${apiUri}/github?user=${username}`,{method:'GET',cache:'default',}).then(json=>json.json()).then(response=>{if(!no_anchor)window.location.hash='pins';$('.featured-tabs').removeClass('actived');$('#tabPins').toggleClass('actived');$('#featuredList').empty();response.forEach(item=>{$('#featuredList').append(`<a href='${item.url}' target='_blank' class='item featured-item'><div class='name'>${item.name}</div><div class='info'>${item.description}</div><div class='footer'><div class='lang lc-${item.name}' data-lang='${item.languages[0]}'>${item.languages[0]}</div><div class='stats'><div class='fas fa-star'></div>${format(item.stars)+' stars'}<div class='fas fa-code-fork'></div>${format(item.forks)+' forks'}</div></div></a>`);colors(`.lc-${item.name}`);});$('#featured').show();});}};let apis=e=>{if(window.location.pathname=='/'){fetch(apiUri).then(json=>json.json()).then(response=>{window.location.hash='apis';$('.featured-tabs').removeClass('actived');$('#tabApis').toggleClass('actived');$('#featuredList').empty();response.list.forEach(item=>{$('#featuredList').append(`<a href='${item.wiki}' target='_blank' class='item featured-item'><div class='name'>${_.capitalize(item.name)}</div></a>`);});$('#featured').show();});}};let crates=e=>{if(window.location.pathname=='/'){fetch(cratesURI).then(json=>json.json()).then(response=>{window.location.hash='crates';$('.featured-tabs').removeClass('actived');$('#tabCrates').toggleClass('actived');$('#featuredList').empty();response.crates.forEach(item=>{$('#featuredList').append(`<a href='https://crates.io/crates/${item.name}' target='_blank' class='item featured-item'><div class='name'>${_.capitalize(item.name)}</div><div class='info'>${item.description}</div><div class='footer'><div class='lang'>${'v.'+item.newest_version}</div><div class='stats'>${format(item.downloads)+' downloads'}</div></div></a>`);});$('#featured').show();});}};let checkApi=e=>{if(window.location.pathname=='/'){if(window.location.hash){$('#featured').addClass('featured-caller');}else{$('#featured').removeClass('featured-caller');}switch(window.location.hash){case '#apis':apis();break;case '#pins':pinned();break;case '#crates':crates();break;case '#projects':projects();break;default:pinned(true);break;}}};let downloadPdf=e=>{let endpoint=window.location.href.replace(window.location.hash,'')+'/export';fetch(`${endpoint}`).then(response=>{if(!response.ok){throw new Error('Network response was not ok')}return response.url}).then(url=>{const a=document.createElement('a');a.href=url;a.download='arquivo.pdf';document.body.appendChild(a);a.click();document.body.removeChild(a);}).catch(error=>{console.error('There was an error with the fetch operation:',error);});};let projects=e=>{fetch(projectsUri).then(json=>json.json()).then(response=>{window.location.hash='projects';$('.featured-tabs').removeClass('actived');$('#tabProjects').toggleClass('actived');$('#featuredList').empty();response.forEach(item=>{$('#featuredList').append(`<a href='${item.url}' target='_blank' class='item featured-item'><div class='name'>${_.capitalize(item.name)}</div></a>`);});$('#featured').show();})};return{apiUri:apiUri,username:username,cratesURI:cratesURI,cratesPage:cratesPage,projectsUri:projectsUri,apis:()=>{return apis()},crates:()=>{return crates()},pinned:()=>{return pinned()},projects:()=>{return projects()},checkApi:()=>{return checkApi()},colors:(lang)=>{return colors(lang)},downloadPdf:()=>{return downloadPdf()},};})();$(e=>{lazyload();Apis.checkApi();Projects.projects();ScrollTo.checkScroll();var hideMenuTimeout;$('#tabApis').on('click',Apis.apis);$('#tabPins').on('click',Apis.pinned);$('#tabCrates').on('click',Apis.crates);$('#tabProjects').on('click',Apis.projects);$(window).on('scroll',ScrollTo.checkScroll);$('#scrollToTopBtn').on('click',ScrollTo.top);$('#postDownloadPdfBtn').on('click',Apis.downloadPdf);$('#apisProjectsListBtn').on('click',Projects.apis);$('#pinnedProjectsListBtn').on('click',Projects.pinned);$('#cratesProjectsListBtn').on('click',Projects.crates);$('#featuredProjectsListBtn').on('click',Projects.projects);$('#toggleMenuBox,#menuBox').hover(function(){clearTimeout(hideMenuTimeout);$('#toggleMenuBox').addClass('actived-menu');$('#menuBox').stop(true,true).fadeIn(250);},function(){hideMenuTimeout=setTimeout(function(){$('#toggleMenuBox').removeClass('actived-menu');$('#menuBox').stop(true,true).fadeOut(250);},300);});$('#projectsBoxBtn,#projectsBox').hover(function(){clearTimeout(hideMenuTimeout);$('#projectsBoxBtn').addClass('actived-logo');$('#projectsBox').stop(true,true).fadeIn(250);},function(){hideMenuTimeout=setTimeout(function(){$('#projectsBoxBtn').removeClass('actived-logo');$('#projectsBox').stop(true,true).fadeOut(250);},300);});$('#postShareBtn').on('click',function(){$(this).toggleClass('actived');$('#postShareBox').slideToggle(250);});$('#postTagsBtn').on('click',function(){$(this).toggleClass('actived');$('#postFlesBtn').removeClass('actived');$('#postLinksBtn').removeClass('actived');$('#postReadAlsoBtn').removeClass('actived');$('#postFilesBox').hide();$('#postLinksBox').hide();$('#postReadAlsoBox').hide();$('#postTagsBox').slideToggle(250);});$('#postFilesBtn').on('click',function(){$(this).toggleClass('actived');$('#postTagsBtn').removeClass('actived');$('#postLinksBtn').removeClass('actived');$('#postReadAlsoBtn').removeClass('actived');$('#postTagsBox').hide();$('#postLinksBox').hide();$('#postReadAlsoBox').hide();$('#postFilesBox').slideToggle(250);});$('#postReadAlsoBtn').on('click',function(){$(this).toggleClass('actived');$('#postTagsBtn').removeClass('actived');$('#postLinksBtn').removeClass('actived');$('#postFilesBtn').removeClass('actived');$('#postTagsBox').hide();$('#postLinksBox').hide();$('#postFilesBox').hide();$('#postReadAlsoBox').slideToggle(250);});$('#postLinksBtn').on('click',function(){$(this).toggleClass('actived');$('#postTagsBtn').removeClass('actived');$('#postFilesBtn').removeClass('actived');$('#postReadAlsoBtn').removeClass('actived');$('#postTagsBox').hide();$('#postFilesBox').hide();$('#postReadAlsoBox').hide();$('#postLinksBox').slideToggle(250);});$('.featured-search').on('input',function(){var searchText=$(this).val().toLowerCase();$('.featured-body>.featured-item').each(function(){var listItemText=$(this).text().toLowerCase();if(listItemText.includes(searchText)){$(this).show();}else{$(this).hide();}});});$('#postShareBoxInput').on('click',function(){$(this).focus();$(this).select();let inputVal=$(this).val();navigator.clipboard.writeText(inputVal);});});const Mermaid=(e=>{const load=e=>{mermaid.initialize({theme:'dark',securityLevel:'loose',});let mermaidCodeBlocks=document.querySelectorAll('.language-mermaid');mermaidCodeBlocks.forEach(block=>{block.classList.remove('language-mermaid');block.classList.add('diagram-mermaid');});mermaidCodeBlocks.forEach(block=>{let diagramDiv=document.createElement('div');diagramDiv.classList.add('mermaid');diagramDiv.textContent=block.textContent;block.textContent='';block.appendChild(diagramDiv);mermaid.init(undefined,diagramDiv);});};load();})();const Projects=(e=>{let apisList=e=>{fetch(Apis.apiUri).then(json=>json.json()).then(response=>{$('#apisProjectsListBtn').addClass('actived');$('#pinnedProjectsListBtn').removeClass('actived');$('#cratesProjectsListBtn').removeClass('actived');$('#featuredProjectsListBtn').removeClass('actived');$('#projectsList').empty();response.list.forEach(item=>{$('#projectsList').append(`<a href='${item.wiki}' target='_blank' class='item project-item'>${_.capitalize(item.name)}</a>`);});});};let pinnedList=e=>{fetch(`${Apis.apiUri}/github?user=${Apis.username}`).then(json=>json.json()).then(response=>{$('#pinnedProjectsListBtn').addClass('actived');$('#apisProjectsListBtn').removeClass('actived');$('#cratesProjectsListBtn').removeClass('actived');$('#featuredProjectsListBtn').removeClass('actived');$('#projectsList').empty();response.forEach(item=>{$('#projectsList').append(`<a href='${item.url}' target='_blank' class='item project-item'>${item.name}</a>`);});});};let projectsList=e=>{fetch(Apis.projectsUri).then(json=>json.json()).then(response=>{$('#featuredProjectsListBtn').addClass('actived');$('#apisProjectsListBtn').removeClass('actived');$('#pinnedProjectsListBtn').removeClass('actived');$('#cratesProjectsListBtn').removeClass('actived');$('#projectsList').empty();response.forEach(item=>{$('#projectsList').append(`<a href='${item.url}' target='_blank' class='item project-item'>${item.name}</a>`);});});};let cratesList=e=>{fetch(Apis.cratesURI).then(json=>json.json()).then(response=>{$('#cratesProjectsListBtn').addClass('actived');$('#apisProjectsListBtn').removeClass('actived');$('#pinnedProjectsListBtn').removeClass('actived');$('#featuredProjectsListBtn').removeClass('actived');$('#projectsList').empty();response.crates.forEach(item=>{$('#projectsList').append(`<a href='https://crates.io/crates/${item.name}' target='_blank' class='item project-item'>${_.capitalize(item.name)}</a>`);});});};return{apis:()=>{return apisList()},crates:()=>{return cratesList()},pinned:()=>{return pinnedList()},projects:()=>{return projectsList()},};})();const ScrollTo=(e=>{let top=e=>{history.pushState(null,null,window.location.href.split('#')[0]);window.scroll({top:0,left:0,behavior:'smooth'});};let checkScroll=e=>{let scrollToTopBtn=document.getElementById('scrollToTopBtn');if(window.scrollY>0){scrollToTopBtn.style.display='block';}else{scrollToTopBtn.style.display='none';}};return{top:top,checkScroll:checkScroll};})();